from openerp.report import report_sxw


class disability_byname_report(report_sxw.rml_parse):
	def __init__(self, cr, uid, name, context):
		super(disability_byname_report, self).__init__(cr, uid, name, context=context)
		self.localcontext.update({
            
			'_get_inst_byname' : self._get_inst_byname,
        })


	def _get_inst_byname(self, form, context=None):
		disability_ids = self.pool.get('outside.works.forms').search(self.cr, self.uid, [('disability_type', 'like', form[0]),])
		disability_recs = self.pool.get('outside.works.forms').browse(self.cr, self.uid, disability_ids, context=context)
		return disability_recs
report_sxw.report_sxw('report.outside.works.dates','outside.works.forms','addons/outside_works_report/report/sci_inst_byname_report.mako',parser=disability_byname_report)

